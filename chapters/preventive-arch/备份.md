# 为什么需要备份

备份是一项基础且至关重要的稳定性策略，其核心意义在于帮助企业与个人抵御各种可能导致数据丢失或不可用的风险。这些风险可能来自自然灾害、操作失误、恶意攻击或技术故障等多种来源。例如：

- **容灾：应对自然灾害与硬件故障。**
    
    数据存储设备并非绝对可靠。地震、洪水、火灾等自然灾害可能摧毁数据中心；硬件损坏、电源故障等也会导致数据丢失。通过定期备份并将数据存储在异地（如云端或备用数据中心），可在灾难发生时快速恢复关键业务，减少停机时间与经济损失。
    
- **防误删：抵御人为错误。**
    
    人类操作难免出错，无论是管理员误删关键文件，还是用户覆盖了旧版本，都可能造成严重后果。备份提供了数据的“时间快照”，让用户能够回溯至历史版本，从而有效挽回损失。
    
- **防勒索软件：恢复被加密的数据。**
    
    勒索软件通过加密受害者数据并索要赎金，严重威胁信息安全。若缺乏可靠备份，企业可能不得不支付赎金或失去数据。完善的备份体系能让用户在遭受攻击后快速恢复数据，无需屈从于攻击者。
    
- **防病毒与恶意软件：恢复被破坏的数据。**
    
    除勒索软件外，其他恶意程序也可能破坏数据完整性。例如病毒感染导致文件损坏或丢失。通过定期备份，系统可在感染后恢复至干净状态，避免更大范围的影响。
    
- **长远性与合规性：满足法规与审计要求。**
    
    部分行业和地区要求企业保存数据以备审计或法律用途。完善的备份机制不仅保障数据可追溯与完整性，也能避免因数据丢失带来的法律风险。
    

# 备份领域的关键术语

- **备份源**：需要备份的数据，通常存放于服务器、虚拟机或 ECS 实例中。
- **备份库**：用于保存备份数据的存储介质，可能是对象存储、磁带或冷归档系统。
- **恢复点（Recovery Point）**：指在备份或灾难恢复过程中，数据可恢复到的特定时间点状态。
- **全量备份（Full Backup）**：对所有数据进行完整备份。备份量较大，但恢复简单，可完整还原到备份时刻。
- **增量备份（Incremental Backup）**：仅备份自上次备份以来新增或修改的数据，节省空间与时间。
- **差异备份（Differential Backup）**：备份自上次全量备份以来所有变化的数据。恢复时仅需全量备份和最近一次差异备份即可。
- **快照（Snapshot）**：记录某一时间点数据状态的“快速拍照”，常用于虚拟化或存储系统，可快速恢复。
- **恢复时间目标（RTO, Recovery Time Objective）**：从故障发生到业务恢复的最长可接受时间。
- **恢复点目标（RPO, Recovery Point Objective）**：灾难发生后允许的数据丢失范围，即系统可恢复到的最近时间点。
- **异地备份（Offsite Backup）**：将数据存储于不同地理位置，以防范本地灾害的影响。
- **云备份（Cloud Backup）**：利用云服务进行备份，具备弹性扩展与远程管理能力。

# 设计备份方案

## 识别关键数据

- 明确哪些数据对业务连续性至关重要；
- 为数据分类设定优先级（如核心业务数据、客户信息、日志文件等）。

以云上对象存储服务为例，需重点备份的包括：

- **管控平面数据**：描述对象存储服务的组件、配置、部署拓扑等，是系统运行的基础数据，体量通常不超过 100 MiB。
- **用户数据的元信息**：如 Bucket 与 Object 的元数据，是恢复用户数据结构的关键。

## 明确恢复目标

- **RPO（恢复点目标）**：可接受的数据丢失范围（例如最多丢失 1 小时内的数据）。
- **RTO（恢复时间目标）**：从灾难发生到系统恢复的时限。

例如：

- **实时备份**：适用于高频变更的关键数据；
- **每日备份**：适合中等重要性数据；
- **定期备份**：用于长期归档或低频变更的数据。

选择备份频率时，应在性能、成本与恢复需求之间取得平衡。

## 明确备份的方式

按恢复点的生成方式，常见备份类型包括：

- **定时备份**：定期执行，每次生成一个恢复点，可为全量或增量备份。
- **持续备份**：实时记录变更（通常仅备份增量数据），可恢复到任意时间点。
- **数据同步**：实时保持源与目标一致，仅存在一个最新恢复点。

|  | 定时备份 | 持续备份 | 数据同步 |
| --- | --- | --- | --- |
| 恢复点数量 | 多个恢复点 | 理论上无限恢复点 | 仅一个最新恢复点 |
| RPO | 取决于备份间隔 | 秒级 | 秒级 |
| RTO | 视恢复方式而定 | 视恢复方式而定 | 极短，可快速切换 |
| 优势 | 简单易控，有多个恢复点 | RPO 较短 | RTO 最短，容灾切换快 |
| 劣势 | RTO 大、RPO 大；可能丢失一个周期数据 | 仅部分系统支持 | 无法防误删，方案复杂 |
| 典型场景 | 防误删、防篡改、防勒索 | 同上 | 容灾切换 |

备份位置可进一步分为：

- **同 Region 备份**：延迟低，但容灾能力有限；
- **跨 Region 备份**：成本较高，但容灾能力更强。

## 考虑恢复

备份只是第一步，更关键的是验证其**可恢复性**。

应通过 **定期演练** 来确保灾难发生时，备份能够真正恢复业务。以 ECS 实例为例，需重点评估以下内容：

- **恢复时长（RTO）**：恢复流程应尽量自动化，以缩短恢复时间；
- **恢复目标**：评估恢复至原实例或新实例的利弊，明确数据同步策略；
- **备份完整性**：确认备份范围是否覆盖所有关键业务数据；
- **演练场景**：包括数据完全丢失与部分丢失两类，验证各类灾难下的恢复效果。

总而言之，恢复方案应针对不同场景（黑屏/白屏、全丢/部分丢）制定完整预案，并定期演练，确保业务可在设定时间内恢复。

# 容灾相关的国家标准

中国在容灾领域制定了多项国家标准，包括：

- **GB/T 20988—2007《信息安全技术 信息系统灾难恢复规范》**；
- **GB/T 30285—2013《信息安全技术 灾难恢复中心建设与运维管理规范》**；
- **GB/T 20988—202X（待发布）**。

[https://app.diagrams.net/?tags=%7B%7D&lightbox=1&highlight=0000ff&edit=_blank&layers=1&nav=1&title=%E7%81%BE%E5%A4%87%E6%A0%87%E5%87%86.drawio#R%3Cmxfile%3E%3Cdiagram%20name%3D%22%E7%AC%AC%201%20%E9%A1%B5%22%20id%3D%22QbZL1Ma-cFaiO_XJ0jNz%22%3E5Zvfb6M4EMf%2FGj9mhW1%2B2I84gb2T9vZW25VO%2B3SigSZoCeQIvbT315%2FHmARiuupKrQxJ%2BlAztgl8PxM8MwCiy93TxzrZb%2F%2Bo0qxAxEmfEF0hQrBLXfkPLM%2BtJXD91rCp81QPOhvu8v8ybXS09TFPs8NgYFNVRZPvh8Z1VZbZuhnYkrqujsNhD1Ux%2FNZ9sskMw906KUzrX3nabFsrI8HZ%2FluWb7bdN2Oftz27pBusz%2BSwTdLq2DPRCNFlXVVN29o9LbMCxOt0aefFL%2FSeDqzOyuY1E6JFev%2F9i9j%2F%2FTnGBf%2F6Och%2BXy30Xv5Nikd9wigKkAhRGKDIQ4yhUOjDb547TerqsUwz2K2DqDhu8ya72ydr6D1KL5C2bbMr5BaWzYeqbDRW7MJ2XhTLqqhqtS%2F64MGfHteztx9pPzR19SPr9fjqI3v0oWd1kz29qAk%2BKS1dNKt2WVM%2FyyHdBF%2FD0d6Jud4%2BnlljR9u2Pc6etiXavTanXZ8JyIaG8AtAyCgQhpGIUMQRD1XDB0tIAFHoIrZCEUOMIrFS0ELEBcwKV4jxAc8wgj1ELhIcuq4XLOFTA0tHwPqIe0g4iucK4AA9SYl1YAPFSiiwHIBzDIPDJQoxMA%2BVI0iLwIiRK%2BbpkqnxdA2eX7%2F9ecUEPG9qBDyTwJdrJuCzqRHwDQKf8LsC8N3AlxdFA8CD%2BowBoDIE9dz3iRZIYBtAYAJ431VgWgCoZxsAMwHQGwLgUtsAuAnAvSEAHrYNoDuAPgHvlghYX4WxmcR%2F8m%2BIgG99GcZjyZ2HeAyZN2R5S0jZoOGiMFbp3hIStzdl9AbKXmbN9gMcbKZZvdw4UIKqbFlKDFq3DWeGWtuPZbCZUGmJhadEXyF5zFCQkO7sQPlBRIhTJToBlSMORaiWB2OI%2BapEEamK1YnZ7MDYj3GwmWe9FgyLoRzYVv7Ysqs4uVcBZgKxj5l%2FdVVWVaTlARL%2BWJnv5lDZD5LMTG0MDIfSOTCThNi5wi5w7yonmcWwzECFXV7lhJ4Fl7sAOMnx8yM0gSDKTOVUrTuGXwaoj0Huqel4WZi2HzJ1BzRvHe2HQ8RMqwY6yp95%2BMa30N5BR%2FvRCyHXoKP9YIOM30Gcm47WIwEyllLOTkf76zUx00Vy1q%2B9bx16OpKSke3UFL28oTmBldvM86SzRipEZXEvoZidthNYzc1UDZOr0HYCK%2FxPcytTYgZJrKBkulfbS40nsPqPZ0cnjXW9jUOSyuNZamw9Muh%2BSK%2FUeOqC2g8RqJlC4V6IoH00mK6PXj5yYz9GoGY2NW9J7YcG9KePZr64fOH5aGw%2FRKDjSdcVaWw%2FRKBmQuaclKRzWMEMTe2HBGZK5kxetgks%2FGa29VGeafxN2ojDpRtGBMmj5i5xHDnWT3YgU3l%2F2CtJ%2FKKBp0j2SSknrIvk0B6g%2F88jvC0jyqrJq3KRlcl9kS22lVTv3ClnpEmTLJrqR1YucknmaTDZGQw9Y%2ByMAGhx1CqFvjMY72%2F0PJUfxuox%2FPZljFjd%2FaGQPUJDqCj8dW9uhHKYus8Ht4pod%2FZSrlaA7jsvvE76SzN0raTIN6Vsr6XfSEWoAK%2FK10kR6o5dnqYwfdRHh17cc1PivNEtJw9%2F6IpG3SPMxPRUlwYfPNNX6a%2F7qtw8v16l%2BnovqdHofw%3D%3D%3C%2Fdiagram%3E%3C%2Fmxfile%3E](https://app.diagrams.net/?tags=%7B%7D&lightbox=1&highlight=0000ff&edit=_blank&layers=1&nav=1&title=%E7%81%BE%E5%A4%87%E6%A0%87%E5%87%86.drawio#R%3Cmxfile%3E%3Cdiagram%20name%3D%22%E7%AC%AC%201%20%E9%A1%B5%22%20id%3D%22QbZL1Ma-cFaiO_XJ0jNz%22%3E5Zvfb6M4EMf%2FGj9mhW1%2B2I84gb2T9vZW25VO%2B3SigSZoCeQIvbT315%2FHmARiuupKrQxJ%2BlAztgl8PxM8MwCiy93TxzrZb%2F%2Bo0qxAxEmfEF0hQrBLXfkPLM%2BtJXD91rCp81QPOhvu8v8ybXS09TFPs8NgYFNVRZPvh8Z1VZbZuhnYkrqujsNhD1Ux%2FNZ9sskMw906KUzrX3nabFsrI8HZ%2FluWb7bdN2Oftz27pBusz%2BSwTdLq2DPRCNFlXVVN29o9LbMCxOt0aefFL%2FSeDqzOyuY1E6JFev%2F9i9j%2F%2FTnGBf%2F6Och%2BXy30Xv5Nikd9wigKkAhRGKDIQ4yhUOjDb547TerqsUwz2K2DqDhu8ya72ydr6D1KL5C2bbMr5BaWzYeqbDRW7MJ2XhTLqqhqtS%2F64MGfHteztx9pPzR19SPr9fjqI3v0oWd1kz29qAk%2BKS1dNKt2WVM%2FyyHdBF%2FD0d6Jud4%2BnlljR9u2Pc6etiXavTanXZ8JyIaG8AtAyCgQhpGIUMQRD1XDB0tIAFHoIrZCEUOMIrFS0ELEBcwKV4jxAc8wgj1ELhIcuq4XLOFTA0tHwPqIe0g4iucK4AA9SYl1YAPFSiiwHIBzDIPDJQoxMA%2BVI0iLwIiRK%2BbpkqnxdA2eX7%2F9ecUEPG9qBDyTwJdrJuCzqRHwDQKf8LsC8N3AlxdFA8CD%2BowBoDIE9dz3iRZIYBtAYAJ431VgWgCoZxsAMwHQGwLgUtsAuAnAvSEAHrYNoDuAPgHvlghYX4WxmcR%2F8m%2BIgG99GcZjyZ2HeAyZN2R5S0jZoOGiMFbp3hIStzdl9AbKXmbN9gMcbKZZvdw4UIKqbFlKDFq3DWeGWtuPZbCZUGmJhadEXyF5zFCQkO7sQPlBRIhTJToBlSMORaiWB2OI%2BapEEamK1YnZ7MDYj3GwmWe9FgyLoRzYVv7Ysqs4uVcBZgKxj5l%2FdVVWVaTlARL%2BWJnv5lDZD5LMTG0MDIfSOTCThNi5wi5w7yonmcWwzECFXV7lhJ4Fl7sAOMnx8yM0gSDKTOVUrTuGXwaoj0Huqel4WZi2HzJ1BzRvHe2HQ8RMqwY6yp95%2BMa30N5BR%2FvRCyHXoKP9YIOM30Gcm47WIwEyllLOTkf76zUx00Vy1q%2B9bx16OpKSke3UFL28oTmBldvM86SzRipEZXEvoZidthNYzc1UDZOr0HYCK%2FxPcytTYgZJrKBkulfbS40nsPqPZ0cnjXW9jUOSyuNZamw9Muh%2BSK%2FUeOqC2g8RqJlC4V6IoH00mK6PXj5yYz9GoGY2NW9J7YcG9KePZr64fOH5aGw%2FRKDjSdcVaWw%2FRKBmQuaclKRzWMEMTe2HBGZK5kxetgks%2FGa29VGeafxN2ojDpRtGBMmj5i5xHDnWT3YgU3l%2F2CtJ%2FKKBp0j2SSknrIvk0B6g%2F88jvC0jyqrJq3KRlcl9kS22lVTv3ClnpEmTLJrqR1YucknmaTDZGQw9Y%2ByMAGhx1CqFvjMY72%2F0PJUfxuox%2FPZljFjd%2FaGQPUJDqCj8dW9uhHKYus8Ht4pod%2FZSrlaA7jsvvE76SzN0raTIN6Vsr6XfSEWoAK%2FK10kR6o5dnqYwfdRHh17cc1PivNEtJw9%2F6IpG3SPMxPRUlwYfPNNX6a%2F7qtw8v16l%2BnovqdHofw%3D%3D%3C%2Fdiagram%3E%3C%2Fmxfile%3E)